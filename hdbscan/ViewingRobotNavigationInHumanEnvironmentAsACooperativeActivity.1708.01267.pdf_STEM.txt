







































untitl 


view robot navig in human 

environ a a cooper activ 

harmish khambhaita and rachid alami 

abstract We claim that navig in human environ can be view a co- 

oper activ especi in constrain situations. human concurr aid and 

compli with each other while move in a share space. cooper help pedestri- 

an to effici reach their own goal and respect convent such a the person 

space of others. To meet human compar efficiency, a robot need to predict the 

human trajectori and plan it own trajectori correspondingli in the same share 

space. In thi work, we present a navig planner that be abl to plan such coop- 

er trajectories, simultan enforc the robot’ kinemat constraint and 

avoid other non-human dynam obstacles. use robust social constraint of 

project time to a possibl futur collision, compat of human-robot motion 

direction, and proxemics, our planner be abl to replic human-lik navig be- 

havior not onli in open space but also in confin areas. besid adapt the robot 

trajectory, the planner be also abl to proactiv propos co-navig solut by 

jointli comput human and robot trajectori within the same optim frame- 

work. We demonstr rich and perform of the cooper planner with 

simul and real world experi on multipl interact navig scenarios. 

1 introduct 

take inspir from the joint action literatur [1] and from our previou contri- 

bution on robot plan abil for human-robot task achiev [2], we pro- 

pose a reactiv navig planner that build and maintain a set of stream of exe- 

cution for the robot and the human in it close vicinity. indeed, it have be show 

harmish khambhaita 

laas-cnrs, universit de toulouse, cnrs, toulouse, france, e-mail: harmish@laas.fr 

rachid alami 

laas-cnrs, universit de toulouse, cnrs, toulouse, france, e-mail: alami@laas.fr 

1 



2 harmish khambhaita and rachid alami 

that it be sometim pertin to endow the robot with the abil to plan not onli 

for itself but also for it human partner. thi abil take it full mean and perti- 

nenc when it be necessari that both act in order to solv a problem. In navigation, 

thi correspond to veri constrain environments. 

while navig in a popul environ can gener be model a a kind 

of coordin activity, sinc each individu have hi own goal and all share an 

environment, thi veri same activ can be transform into a problem that need 

cooper of two or sever individu when the environ becom veri con- 

strained: a give individu cannot find hi path unless anoth individu partici- 

pate and help in find a solution. 

thi be exactli the kind of problem we want to tackle: 

• We would like to develop a robot navig system that be abl to manag usual 
coordin issues, but that be also abl to manag intric situations. 

• besides, we would like, to come up with a scheme that allow the robot to be 
proactiv by propos an accept solut and, whenev possible, to take 

“most of the load” when the human and the robot have to share the load to solv 

a problem. 

• and, finally, we would like the robot to take into account human accept 
and comfort issues. 

fig. 1 show a typic case where both robot and human can safe and smoothli 

pa each other if they cooper and facilit the other parti by give enough 

space to move. It be the duti of both to avoid a collis and help the other parti to 

advanc toward their destination. the solut do not includ onli the contribu- 

tion of the robot but also of the human. thi be whi we claim that our planner be a 

cooper planner. 

In thi work, we propos a cooper navig planner that predict a plau- 

sibl trajectori for the human and accordingli plan for a robot trajectori that 

satisfi a set of social constraints. It gener both robot and human trajectori 

within a unifi plan framework, thu facilit both agent to avoid ani other 

static or dynam obstacl present in the share space. gener of these trajec- 

tori becom one multi-constrain problem and it be solv use a graph-bas 

optim solver. We not onli use proxemics, but also appli time-to-collis and 

direct constraint dure optimization. anoth import aspect in term of 

perceiv safeti and comfort be that the propos planner inher balanc be- 

tween trajectori modif and speed adaptation. We also show improv in 

the fluenci of interact with use of the propos cooper navig planner. 

the key contribut of thi paper be three-fold: 

1. An optim base framework for comput the robot trajectori and pre- 

dict probabl trajectori of nearbi human that respect motion and social 

constraints. 

2. prudent devis social constraint for (a) safety, (b) time-to-collision, and (c) 

direct compat of human-robot motion. 

3. A demonstr of the success of propos approach in everyday interact 

navig situations, especi in confin spaces. 



view robot navig in human environ a a cooper activ 3 

fig. 1: A corridor-cross scenario with propos cooper planner. the robot be 

abl to calcul it own trajectori (in red) and propos a trajectori for the human 

(in blue) that solv the co-navig problem. here the robot assum that hu- 

man want to go to the other end of the corridor. We have add cylindr shape 

landmark on the plan robot trajectori and predict human trajectori by the co- 

oper planner. the landmark show futur human and robot posit at everi 

second. the color of the landmark on the human and robot trajectori correspond to 

same futur time. We can see that the robot move to it right well in advanc (even 

if it be not absolut necessari at the moment the robot see the human). with such 

proactiv behavior the robot be offer the solut to the co-navig situation. 

the robot do not acceler until the human pass so that the human do not feel 

threatened, in thi exampl it pass the human at approxim 0.6 m/ and late 
acceler to 0.8 m/s. If the human reject the solut (bottom figure) suggest 
by the robot and move in the opposit direct to what the robot have predicted, the 

robot be abl to quickli react by chang it path that adher to human’ wish. 

robot’ global path be show in green, where a a veloc base predict of hu- 

man path be show in yellow. 



4 harmish khambhaita and rachid alami 

our approach aim to balanc and tune the effort between the human and the 

robot to solv a co-navig task. It provid addit advantag of streamlin 

robot behavior from open space to veri constrain environment conditions. In 

it spirit, our approach be similar to the previous propos approach for geomet- 

ric [3] and symbol [4] plan systems, where the robot synthes a share plan 

for the human and itself. 

2 relatedwork 

act togeth 

research in psycholog [5] and philosophi [6] have lead to a good understand of 

human behavior dure joint action and collabor and have help to identifi 

the key element for human-robot joint action [7]. 

In [8], tomassello et al. defin a goal a the represent of a desir state 

and an intent a an action plan chosen in order to reach the goal. bratman add 

that if there be a share intent to perform an action, the partner should agre on 

the mesh sub-part of a share plan [9], which be elabor base on common 

ground [10]. 

the reactiv scheme that we propos here implement some of the joint action 

principles. It take into account the (navigation) intent of the human; it adapt 

perman to hi behavior; it be proactiv and do it best to facilit the action 

of the human. 

social convent 

the theori of proxem [11] have provid rule for realiz more human like be- 

havior dure robot motion and non-mot task [12]. the most of state-of-the-art 

human-awar navig planner add proxem cost around human in a grid- 

base map represent of the robot oper environ [13]. use thi cost- 

map the path plan algorithm can gener path that low the total cost over 

the entir path, therebi keep a safe distanc from human to maxim human 

comfort. the human-awar navig planner describ by sisbot et al. [14] al- 

readi provid safe path consid not onli proxem distanc but also other 

social criterion like visibl and hidden zone around static human in the environ- 

ment. 

In extens to that work we defin a safeti constraint in optim framework 

around the trajectori of move humans. however, to avoid over-cauti behavior 

of the robot, we onli appli the safeti cost around the respect point in time along 

the human-robot trajectori pairs. that means, the optim procedur ensur 



view robot navig in human environ a a cooper activ 5 

give safeti distanc between plan posit of the robot and predict posit 

of the human at all futur time point t = 1, t = 2, . . . up to the plan horizon. 
sinc these cost gener function regard human a static obstacles, typi- 

calli the plan framework perform continu re-plan of the robot path to 

cope up with dynam situations. nevertheless, onli immedi path of the robot 

be re-plan for the plan algorithm to reach real-tim compliance. the result- 

ing robot motion be robust and safe but not necessarili social. the robot often 

oscil or stop complet while move near human [15]. 

the direct cost model introduc by kruse et al. [16] have show to increas 

legibl of the robot motions, where a robot attempt to solv a spatial conflict by 

adjust veloc instead of path when possible. human prefer robot follow 

thi strategy, particularli in path cross situat [15]. We exploit thi result and 

introduc direct cost in our optim framework. the direct cost 

discourag face-to-fac motion toward a person. It also make the robot slow down 

while move veri near to the human becaus of the model invers proportion 

of thi constraint to the distanc between the human and the robot. 

human motion predict 

the requir for human motion predict aris when we intend to design a 

robot navig system that be social accept [17]. predict of human tra- 

jectori independ of robot plans, however, do not allevi the problem of 

pure reactiv robot behavior [18]. for example, consid a corridor situat where 

a robot and a person could onli cross each other in a side-by-sid configur 

(fig. 1). If the person be walk in the middl of the corridor, due to their predict 

path, the robot will fail to find a collis free trajectori use a reactiv planner. 

therefore, predict of human trajectori have to consid that the human do see 

the robot and will also tri to contribut to collis avoid with the robot by 

modifi their own trajectories. In other words, there be a need for a planner that 

can proactiv suggest a solut to the interact navig situations. 

more recent approach have paid scrupul attent to human path predic- 

tion base on renown social forc model [19], which facilit the navig 

planner to cope with uncertain human motions. these method predict a class of 

homotyp distinct trajectori for human and design a planner that, from hu- 

man demonstrations, can learn navig polici for robot to move on human-lik 

trajectori [17]. although, thi scheme work fine in larg or open space where 

the robot have enough latitud to move, it may requir re-learn of the model pa- 

ramet for special or constrain situations, such a cross long corridor or 

pass through a door. 



6 harmish khambhaita and rachid alami 

plan for the robot and the human 

concern the abil for the robot to plan not onli for itself but also for it hu- 

man partner, we have develop earli a task planner call hatp planner (human 

awar task planner) [20, 21]. the hatp plan framework extend the tradi- 

tional hierarch task network plan domain represent and semant by 

make them more suitabl to produc plan which involv human and robot act- 

ing togeth toward a joint goal. hatp be use by the robot to produc human-robot 

share plan which be then use to anticip human action, to suggest a cours of 

action to humans, or possibl to ask help from the human if needed. 

thi effect enrich the interact capabl of the robot by provid the 

system with what be in essenc a predict of the human behavior. thi predict 

be also use by the robot execut control to monitor the engag of the 

human partner dure plan achievement. anoth key properti be to produc plan 

that would be possibl prefer by the human partner. for instance, hatp includ 

cost-bas plan select a well a mechan call social rule to promot plan 

that be consid a suitabl for human-robot interaction. 

We have also appli the same approach to a differ type of problem that call 

for elabor geometr reason and plan abilities: robot-human handov in 

a workspac possibl clutter by obstacles. the question be where to perform the 

task and how to balanc between the effort of the human and the robot [22, 3]. 

similarly, the planner we propos here manag explicitli one elast band per 

agent and plan for all. A number of social constraint have be special devis 

to produc plan that would be possibl prefer by the human encount the 

robot. the robot and the human band tight be differ in order to forc the 

robot take most of the load. 

anoth approach, present by ferrer et al. [23], us the social forc model for 

both to predict human path and control the robot motion. In thi approach, everi 

iter of plan step us the human predict inform which be depen- 

dent on the path calcul dure the previou iteration. advantag of such scheme 

be robot act proactiv in give situation, however, human predict be onli 

reaction to the robot motion. our approach be rather cooperative, where optimiza- 

tion process coher provid a solut for the interact navig situation. 

compar result could be achiev with propos cooper planner in non- 

constrain cases, but in situat such a door cross the cooper planner 

avoid unnecessari detours. In situat like corridor cross with cooper 

planner the robot prefer wait in a place where it limits, a much a possible, ob- 

struction to the human motion, instead of move backward due to repuls human 

interact forc when use a social forc model base planner. 

the intent awar reactiv avoid scheme propos by [24] us counter- 

factual reason to calcul probabl over a possibl set of navig goals. 

use such probabl set, thi approach predict human motion toward most prob- 

abl goal and gener local optim motion for multipl robots. the time scale 

collis cone base approach aim to solv the same problem, albeit give same 

treatment to human and non-human obstacl [25]. while be effect in dens 



view robot navig in human environ a a cooper activ 7 

crowd environments, a a virtu of remain pure reactive, such approach 

could lead to needl detour in intric situations. our focu is, rather, on sophis- 

ticat interact motion with singl person to a group of peopl in semi crowd 

environments. 

3 methodolog 

elast band be a well-studi approach for dynam obstacl avoid that onli 

local modifi the robot path to keep a safe distanc from previous unknown 

obstacl [26]. however, the modifi path often do not satisfi the kinodynam 

constraint of the robot. therefore, a gener scheme be to use a control modul 

that take the output path (elast band) and gener feasibl trajectori that the 

robot can follow [27]. recent propos of time elast band evad thi problem 

by explicitli consid tempor inform [28]. It local deform the robot 

path and comput a trajectori augment with a seri of time-differ valu 

between each success poses, instead of a pure geometr path. time elast 

band make it easi to take kinodynam and nonholonom constraint into account, 

formal the optim problem a a non-linear least squar problem. We 

have substanti extend thi work by introduc predict and optim of 

human trajectori in the same framework, in [29] we give preliminari descript 

of out approach. besides, we have brought in care select social constraint in 

to the optim framework. 

We address the task of robot navig among human by appli least squar 

optim to simultan minim multipl cost-funct that repres 

cost associ with human-robot cooper a well a robot dynamics. the op- 

timiz framework explicitli includ predict of plausibl trajectori within 

the same non-linear least squar problem. compar to earli work [30], we cre- 

ate elastic-band also for the human and extend their hyper-graph structur to han- 

dle human separ from ordinari obstacl use well-ground human-awar 

plan constraints. the result scheme combin in one step the robot-plans, 

human-plan and robot-react process. 

3.1 elast band and graph optim 

the time elast band approach [28] augment each of the n∈n 2D poses, de- 
fin a P := {pi=[xi,yi,θi] 

T} 
n 

i=0, of the robot path with time interv between each 

consecut poses, denot a T := {∆ t j} 
n−1 
j=0. the result tupl B := {p,t } rep- 

resent a trajectori that be subject to deform by the optim algorithm. In 

addit to the robot trajectori BR , we also repres a set of human trajectori 
{bhk} 

m 

k=0 
a time elast bands, when there be m∈n human in the vicin of the 

robot. 



8 harmish khambhaita and rachid alami 

the gist of our approach be to jointli optim the robot and human trajectori 

in term of social and kinodynam constraints. It requir to solv the follow 

multivari multi-object optim problem use the weighted-sum model: 

f (br ,bhk) =∑ 
a 

γa fa(br )+∑ 
b 

γb fb(bhk) 

+∑ 
c 

γc fc(br ,bhk) 
(1) 

{b∗r ,B 
∗ 
Hk 
}= argmin 

{br ,bhk 
} 

f (br ,bhk) (2) 

where {b∗r ,B 
∗ 
Hk 
} denot the set optim robot and human trajectories. the 

compon object function for the robot trajectory, human trajectori and 

human-robot social constraint be denot by fa, fb and fc respectively. 

We inherit the kinodynam and nonholonom constraint from [28] impos on 

the robot trajectory. these constraint enforc physic limit of veloc and accel- 

erat between consecut pose of the trajectory, a minimum clearanc distanc 

from obstacl for each of the poses, and fast execut time for the whole tra- 

jectory. similarli we impos kinodynam constraint on human trajectories, with 

human veloc and acceler limit obtain from empir studi of pedes- 

trian interact data [31]. while predict human trajectori the optim 

algorithm tri to maintain nomin human veloc (and not the fast veloc 

that human can move with). constraint on human-robot cooper motion be 

discuss in detail in sec. 3.2. 

In our approach we have modifi the error function use for safety-clear 

from obstacl a following, 

fobs(d,do,ε,s) = 

 
 

 

(do+ε)−d 
sd+1 if 0� d < (do+ ε), 

(do+ ε)−d if d < 0, 

0 otherwise. 

(3) 

where d be the distanc between obstacl and a robot pose dure current iter- 

ation of the optim process, do be low bound for obstacl clearance, ε be a 

paramet to control the accuraci of the approximation. thi equat be non-linear 

between the low bound and zero, and the paramet S adjust the non-linearity. 

such construct of the error function enabl u to manipul rel impor- 

tanc of safeti clearanc between robot-obstacl and robot-human. that is, we can 

make robot push itself more toward an obstacl rather than toward a human in 

constrain situations. 

similarli to [28], we have adopt the gener optim framework g2o [32] 

which requir map of the least-squar problem into a graph representation. 

each node in the graph repres a pose along the trajectori and edg that connect 

two node repres constraints, a show in fig. 2. It be possibl to write separ 

error function for each of the optim constraints. thi graph base structur 

provid and easi interfac to initi and maintain the structur of variabl 



view robot navig in human environ a a cooper activ 9 

and constraint that be use dure the optim process. the g2o framework 

employ levenberg-marquardt to solv the non-linear least squar problem de- 

fin by the graph structure. the graph typic result in a spars inform 

matrix, consequ the g2o framework us state-of-the-art spars linear system 

solver [33]. result of the optim adjust the posit and orient of each 

of the pose a well a time differ between the consecut pose of the trajec- 

tori such that the whole trajectori minim the impos constraints. 

since, the result trajectori be an optim deform version of the initi path, 

thi represent of trajectori be similar to an elast band. By adjust weight 

on the constraint for robot and human separ (the paramet γa and γb in 

equat 1), we can balanc and tune the “tightness” of the elast band for effect 

effort sharing. 

the optim process run in two comput loops. inner loop correspond 

to iter loop for the least-squar solver. after each full run of the inner loop, 

the optim process updat the graph structur use late result of the solver. 

dure thi update, new node be add between two node in the graph if the time- 

differ between the two node exce certain threshold (which an optim 

parameter) in order to maintain same time differ between each pair of neighbour 

nodes. therefore, the human and robot time-differ nodes, show a hi∆t0 and 

r∆t0 in the graph structur be synchron dure thi outer loop of graph update. 

both inner and outer loop run for sever iterations, where the number of iter 

directli affect the qualiti of produc trajectori and optim time. 

3.2 social constraint 

We have select the abov mention graph-bas solver becaus it enabl u to 

introduc the social constraint and rule which be appropri for effici human- 

robot cooper planning. sinc we have the whole trajectori of human and robot 

at our disposal, we have add social constraint between human and robot node in 

the graph structur that correspond to the same time-step dure their trajectories. 

that means, we add an edg for the safeti constraint between nth node of human 

and robot trajectory, anoth edg between n+ 1th nodes, and so on. nevertheless, 
we onli add edg to the node correspond to part of the human path that fall 

with the local plan area center at the robot. 

safeti constraint: the safeti constraint us proxem base cost function to 

ensur minimum safeti distanc between correspond human and robot poses. 

therefor the error function associ with the safeti constraint is, 

fsa f ety(d,ds,ε) = 

� 
(ds+ ε)−d if d < (ds+ ε), 

0 otherwise. 
(4) 

where d be a low bound on allow safe distanc between human and robot 

pose at the same time-stamp dure the trajectory. there be multipl way one can 



10 harmish khambhaita and rachid alami 

c o 
b 

o1 

c 
ob 

c 
ob 

rx1 

r∆t0 

cvelr ,caccr ,ckinrrx0 

c s 
a 
fe 

ty 
,c 

tt 
c 
,c 

d 
ir 

c s 
a 
fe 

ty 
,c 

tt 
c 
,c 

d 
ir 

h0x1 

h0∆t0 

cvelh ,cacch ,ckinhh0x0 

c s 
e 
p 

c s 
e 
p 

c s 
a 
fe 

ty 
,c 

tt 
c 
,c 

d 
ir 

c s 
a 
fe 

ty 
,c 

tt 
c 
,c 

d 
ir 

h1x1 

h1∆t0 

cvelh ,cacch ,ckinhh1x0 

fig. 2: graph structure. the bottom row have consecut node for robot trajectori 

(rx0, rx1, . . . ); edg enforc velocity, acceleration, and kinodynam constraint 

connect these nodes. We combin the three edg into one for easi depiction. 

penalti impos by these edg depend on time differ between consecut 

nodes, therefor the time-diff node r∆t0 connect with them. pose and time-diff 

node be subject to chang by the optim process. similarly, the middl and 

the top row repres trajectori for human 0 and 1 respectively, albeit with dif- 

ferent weight for constraints. obstacl node (o1), show with doubl circle, be a 

fix node, mean the optim process cannot alter it position. the edg cob 
show the constraint for keep minimum distanc from obstacles. the edg csep 
repres the constraint to keep minimum separ between two humans. node 

of the robot and a human that belong to the same time-step of their trajectori be 

connect by three edg (csa f ety, cttc and cdir) that impos social constraints. 



view robot navig in human environ a a cooper activ 11 

repres the footprint of the robot in thi plan scheme, for simpl circl to com- 

plex polygon. human footprint be repres a circl with specifi radius. d be 

the outer distanc between human and robot. calcul the outer distanc between 

a polygon shape robot and a circl shape human be comput more expen- 

sive than calcul outer distanc between human and robot that be both circl 

shaped. thus, it be advis to repres the robot with a simpler footprint. that 

means, the optim procedur ensur give safeti distanc between plan 

posit of the robot and predict posit of the human at all futur time point 

t = 1, t = 2, . . . up to the plan horizon. 
the graph structur inject an edg for thi safeti constraint not onli to each 

human-robot trajectori pair but also to each human-human trajectori pair, albeit 

with differ paramet for the error function. such construct of the graph 

structur ensur that the optim process respect proxem cost between hu- 

mans. 

time-to-collis constraint: A novel social constraint use in the propos 

scheme be time-to-collision, that is, the project time to a possibl futur collis 

with a human. empir studi have show that time-to-collis between self and 

other govern the pedestrian interact across wide varieti of situat [34]. We 

make use of these result by appli high cost to human-robot configur 

that result in less time-to-collision. our hypothesi is, the time-to-collis constraint 

will push the robot to act earli enough, thu clearli show the robot motion in- 

tention to the human counterpart. 

fttc(ttc,τ,ε) = 

� 
[(τ+ε)−ttc]α 

C2 
if ttc< (τ+ ε), 

0 otherwise. 
(5) 

where τ be the low bound on time at which the robot predict a collis occur- 

ring with the human. In other words, τ = 8 indic that the robot start add cost 
between the configur (node) of human and robot whenev the comput time- 

to-collis go below 8 s. the paramet α be a scale paramet for strengthen 

or weaken the penalti on particular human robot configur due to comput 

time to collis and C2 be the squar distanc between human and robot center 

points. 

ttc be the predict time to collis between a human and the robot. here we 

consid both human and robot have a disc-lik shape, however, with differ 

radius. time to collis defin a the time when the boundari of these two move 

disc meet base on their current linear velocities.with thi constraint our robot be 

abl to proactiv propose, a co-navig solut suffici well ahead of time 

compar to other state-of-the-art approaches. 

direct constraint: We have add the direct constraint, which defin 

a compat measur between human and robot configurations. motiv for 

thi social constraint come from our previou work [15] which aim to improv the 

legibl of the robot motions. similar to equat 4, the direct constraint be 

also low bound by a threshold ς , and defin as, 



12 harmish khambhaita and rachid alami 

fdir(cdir,ς ,ε) = 

� 
(ς + ε)− cdir if cdir < (ς + ε), 

0 otherwise. 
(6) 

where the direct cost be defin as, 

cdir = 
−→vr · 

−−−→pr pH + 
−→vh · 

−−−→ph pR 
C2 

(7) 

−→vr and 
−→vh be robot and human veloc vector respectively, and 

−−−→pr pH defin 
the vector from robot posit to human posit in 2D vector space and C2 be the 

squar distanc between center point of robot and human. thi measur penal 

motion where human and robot be move straight toward each other. moreover, 

high rel veloc mean high penalti values. direct constraint establish 

tread-off between the effect of slow down or chang the path. 

with these social constraint we have test the propos planner in simul 

and on two real robot platforms. the sec. 4 discu the result of our test in 

detail. 

3.3 human-awar plan architectur 

the elast band approach can onli local deform the robot trajectory, thu it re- 

quir an initi path to bootstrap the optimization. A simpl grid-bas global plan- 

ning algorithm, for exampl a∗, be suitabl for comput thi initi path. 

the well-known and versatil robot navig architectur move base [35] 

also differenti between global plan for gener a path from the start po- 

sition to the goal posit in arbitrarili larg environment, and local plan for 

avoid immedi obstacl by local modifi the robot trajectory. We have 

adopt move base for our robot navig architectur within which the pro- 

pose human-robot cooper planner fit a a local planner. fig. 3 depict the 

full navig architecture. 

It be prefer to reason differ for move and static human in the robot 

oper environment. If posit of ani human be know at the time of global 

planning, it be good to incorpor the proxem cost around static human al- 

readi while calcul the global path. hence, we have develop a plugin for 

layer costmap librari [36] (which be part of the move base framework) 

that add safeti and visibl cost introduc by [14] around human posit in the 

occup grid-map. 

We be use a separ modul to predict first path for track human in the 

robot environ that the cooper local planner us for optimization. thi al- 

low u to switch between differ predict method depend on the interact 

situat at hand. for example, in a corridor cross situat we use the heurist 

that the most probabl goal of the human be to go to other side of the corridor and 

so we creat and imaginari goal posit behind the current robot posit when a 



view robot navig in human environ a a cooper activ 13 

base control 

sensor 

obstacl 

percept 

human 

mapnavig goal 

local 

local plan 

filter 

human 

predict 

human path 

costmap 

global 

costmap 

local 

planner 

global 

local planner 

cooper 

fig. 3: overview of the navig softwar architecture. 

human be first detected. In open areas, we use the velocity-obstacl method [37] 

to gener a short-term path for the track humans. 

sinc in thi cooper plan scheme we be treat human differ 

than other obstacl in the environment, we filter out the human posit data from 

the obstacl detect sensor (laser scanner in out experiments). 

4 experi 

befor conduct experi in the real world, we test the propos social con- 

straint and valid them in a simul environment. We have design a human 

navig simul with a framework similar to move base, therebi use sepa- 

rate global and local plan modules. the global plan modul us the same 

global costmap that of the robot, for plan global path for human between 

give start and goal positions. As the local plan modul we have develop 

simpl teleport control to updat human posit and velocity, make human 

move on the global path with a constant velocity. By expos the human trajecto- 

rie from the cooper planner to the human navig simul a new path for 

the human to follow, we can simul full interact navig situations. the hu- 

man simul can simul motion of multipl humans, thu allow u to test our 

planner also on semi-crowd environments. for simul a pr21 robot, we have 

1 http://wiki.ros.org/robots/pr2 



14 harmish khambhaita and rachid alami 

fig. 4: interfac for test the cooper navig planner in simulation. 

use the gener open sourc simul engin morse2. fig. 4 show a screenshot 

of the simul interface. In out previou work [38], we have compar the pro- 

pose cooper planner with two other state-of-the-art human-awar navig 

planner in sever canon path cross situations. 

We have port the cooper planner to two servic robot platforms, the 

pr2 and the pepper3 robot. for real world experiments, our object be to valid 

the navig plan system, not the human detect and track algorithms. 

therefor we employ off-the-shelf motion captur system from optitrack4. It 

publish posit and veloc of track human at a certain frequenc (10 Hz 

dure our experiments5). 

On the pr2 robot we have also activ a modul for coordin the head mo- 

tion with the navig planner to facilit commun of robot’ navig 

intent [39]. 

fig. 5 demonstr the capabl of cooper plan with a seri of ex- 

periment in real world interact situations. We have observ it perform good 

compar to pure reactiv plan schemes. It should be note that, for all inter- 

activ situat show here the planer be not particularli “informed” about the 

task. the behavior such a stop near the door and facilit human in con- 

fin corridor emerg becaus of the integr social constraint in the optimiza- 

2 https://www.openrobots.org/wiki/mors 
3 https://www.ald.softbankrobotics.com/en/pepp 
4 http://www.optitrack.com/ 
5 although the motion captur system deliv data at high frequenc (about 100 hz), we appli 

a move averag filter and re-sampl the filter data at 10 Hz to have good estim of veloc 



view robot navig in human environ a a cooper activ 15 

(a) (b) (c) (d) 

(e) (f) (g) (h) 

fig. 5: trajectori gener by cooper planner for differ interact navi- 

gation tasks. (a and e) A corridor cross situat where human and robot share 

effort to avoid collid with each other. (b and f) A more confin corridor cross 

situat where the robot facilit the human to cross the corridor with suffici 

space. (c and g) An open area cross situat where two human decid to move 

on either side of the robot. although in thi situat the origin plan suggest by 

the robot be to pa both person on it right side, when the person decid oth- 

erwis the robot compli and quickli adapt it own path accordingly. (d and h) 

A door cross situat where the human want to pa through a door, the robot 

facilit the human by stop near the door. the robot stop not becaus of a 

plan failur but becaus it have plan a cooper strategi where it wait 

until the human pass through. 

tion framework. fig. 6 show the effect of tune the effort between a human and a 

robot for a share navig task. 

dure a navig task, if the human decid to move on other path than one 

suggest by the robot (e.g., choos to pa by anoth side of the robot), the 

robot quickli adapt it trajectory. In situat where robot have enough space to 

move well advanc in time, the robot proactiv choos a path that be both legibl 

and comfort for the human counterpart. 

5 conclus and futurework 

propos cooper plan scheme have sever advantag over state-of-the-art 

human-awar plan schemes. our robot do not stay pure reactiv but now 

it can also propos a path for the human assum she will consid the propos 



16 harmish khambhaita and rachid alami 

(a) (b) (c) 

fig. 6: balanc the share effort between human and robot. (a) human and robot 

share equal effort. (b) the robot share most of the effort and move far away from 

predict human path. (c) although never use in real world situations, it be possibl 

to design a rude behavior of the robot where it expect human to make more effort 

for avoid a collision. 

solut that benefit both agents. thi be crucial especi in confin spaces, such 

a corridor where two agent can navig onli in side-by-sid configuration. 

thi approach open up a new avenu for quickli test and compar differ 

social constraints. We plan to defin new social constraint that will enabl further in- 

teract motion scenario such a activ approach a person, queue behavior 

in long hallway like environ with multipl humans, guid a group of peo- 

ple, and more. We be prepar for a seri of experi and a user studi which 

compar the cooper planner against other proactiv plan approaches. 

the comput cost of the cooper planner increas with the number 

of human surround the robot a well a number and type of social constraint 

use for optimization. thi be a limit factor for use the cooper planner in 

crowd situation. We plan to improv over thi limit by parallelli evalu 

the error function and util gpu capabl provid by state-of-the-art spars 

matrix solvers. 

acknowledg thi work be support by the european union’ horizon 2020 research and 

innov programm under grant agreement no. 688147 (mummer project). 

refer 

1. N. sebanz, H. bekkering, and G. knoblich, “joint action: bodi and mind move together,” 

trend in cognit sciences, vol. 10, no. 2, pp. 70 – 76, 2006. 

2. S. lemaignan, M. warnier, E. A. sisbot, A. clodic, and R. alami, “artifici cognit for 

social human–robot interaction: An implementation,” artifici intelligence, vol. 247, pp. 45 

– 69, 2017. 

3. J. waldhart, M. gharbi, and R. alami, “plan handov involv human and robot in 

constrain environment,” in proc. ieee/rsj intern confer on intellig robot 



view robot navig in human environ a a cooper activ 17 

and system (iros), septemb 28 - octob 2, 2015, pp. 6473–6478. 

4. J. shah, J. wiken, B. C. williams, and C. breazeal, “improv human-robot team perfor- 

manc use chaski, A human-inspir plan execut system,” in proc. acm/iee inter- 

nation confer on human-robot interact (hri), march 6-9, 2011, pp. 29–36. 

5. G. knoblich, S. butterfill, and N. sebanz, “psycholog research on joint action,” psychol- 

ogi of learn and motivation, vol. 54, pp. 59 – 101, 2011. 

6. E. pacherie, “the phenomenolog of joint action: self-ag vs. joint-agency,” in joint 

attention: new developments, S. axel, ed., 2012. 

7. A. clodic, R. alami, and R. chatila, “key element for human-robot joint action,” in so- 

ciabl robot and the futur of social relations, 2014, vol. 273, pp. 23 – 33. 

8. M. tomasello, M. carpenter, J. call, T. behne, and H. moll, “understand and share 

intentions: the origin of cultur cognition,” behavor and brain sciences, vol. 28, no. 5, 

pp. 675–691, 2005. 

9. M. E. bratman, “share intention,” ethics, vol. 104, no. 1, pp. 97–113, 1993. 

10. H. H. clark, R. schreuder, and S. buttrick, “common ground at the understand of demon- 

strativ reference,” journal of verbal learn and verbal behavior, vol. 22, no. 2, pp. 245 – 

258, 1983. 

11. E. T. hall, the hidden dimension: man’ use of space in public and private, 1966. 

12. J. A. rio martinez, A. spalanzani, and C. laugier, “from proxem theori to socially- 

awar navigation: A survey,” intern journal of social robotics, vol. 7, no. 2, pp. 

137–153, 2014. 

13. T. kruse, A. K. pandey, R. alami, and A. kirsch, “human-awar robot navigation: A survey,” 

robot and autonom systems, vol. 61, no. 12, pp. 1726 – 1743, 2013. 

14. E. A. sisbot, L. F. marin-urias, R. alami, and T. siméon, “A human awar mobil robot 

motion planner,” ieee transact on robotics, vol. 23, no. 5, pp. 874–883, 2007. 

15. T. kruse, A. kirsch, H. khambhaita, and R. alami, “evalu direct cost model 

in navigation,” in proc. acm/iee intern confer on human-robot interact 

(hri), 2014, pp. 350–357. 

16. T. kruse, P. basili, S. glasauer, and A. kirsch, “legibl robot navig in the proxim 

of move humans,” in proc. ieee workshop on advanc robot and it social impact 

(arso), 2012, pp. 83–88. 

17. M. kuderer, H. kretzschmar, C. sprunk, and W. burgard, “feature-bas predict of tra- 

jectori for social compliant navigation,” in proc. robotics: scienc and system (rss), 

juli 9-13, 2012. 

18. G. ferrer and A. sanfeliu, “proactiv kinodynam plan use the extend social forc 

model and human motion predict in urban environments,” in proc. ieee/rsj interna- 

tional confer on intellig robot and system (iros), 2014, pp. 1730–1735. 

19. D. helb and P. molnár, “social forc model for pedestrian dynamics,” physic review E, 

vol. 51, no. 5, pp. 4282–4286, 1995. 

20. S. alili, R. alami, and V. montreuil, “A task planner for an autonom social robot,” in 

distribut autonom robot system 8, H. asama, H. kurokawa, J. ota, and K. sekiyama, 

eds., 2009, pp. 335–344. 

21. R. lallement, L. de silva, and R. alami, “hatp: An htn planner for robotics,” corr, vol. 

abs/1405.5345, 2014. 

22. J. mainprice, M. gharbi, T. siméon, and R. alami, “share effort in plan human-robot 

handov tasks,” in proc. ieee intern symposium on robot and human interact 

commun (ro-man), 2012, pp. 764–770. 

23. G. ferrer and A. sanfeliu, “multi-object cost-to-go function on robot navig in 

dynam environments,” in proc. ieee/rsj intern confer on intellig robot 

and system (iros), 2015, pp. 3824–3829. 

24. A. bordallo, F. previtali, N. nardelli, and S. ramamoorthy, “counterfactu reason about 

intent for interact navig in dynam environments,” in proc. ieee/rsj intern 

confer on intellig robot and system (iros), septemb 28 - octob 2, 2015, pp. 

2943–2950. 



18 harmish khambhaita and rachid alami 

25. A. nagariya, B. gopalakrishnan, A. K. singh, K. gupta, and K. M. krishna, “mobil robot 

navig amidst human with intent and uncertainties: A time scale collis cone ap- 

proach,” in proc. ieee confer on decis and control (cdc), decemb 15-18, 2015, 

pp. 2773–2779. 

26. S. quinlan and O. khatib, “elast bands: connect path plan and control,” in proc. 

ieee intern confer on robot and autom (icra), 1993, pp. 802–807. 

27. M. khatib, H. jaouni, R. chatila, and j.-p. laumond, “dynam path modif for car- 

like nonholonom mobil robots,” in proc. ieee intern confer on robot and 

autom (icra), april 20-25, 1997, pp. 2920–2925. 

28. C. rösmann, W. feiten, T. woesch, F. hoffmann, and T. bertram, “trajectori modifica- 

tion consid dynam constraint of autonom robots,” in proc. german confer 

on robot (robotik), 2012, pp. 1–6. 

29. H. khambhaita and R. alami, “A human-robot cooper navig planner,” in proc. the 

companion of the acm/iee intern confer on human-robot interact (hri), 

2017, pp. 161–162. 

30. C. rösmann, W. feiten, T. wösch, F. hoffmann, and T. bertram, “effici trajectori opti- 

mizat use a spars model,” in proc. european confer on mobil robot (ecmr), 

septemb 25-27, 2013, pp. 138–143. 

31. R. W. bohannon, “comfort and maximum walk speed of adult age 20—79 years: 

refer valu and determinants,” age and ageing, vol. 26, no. 1, pp. 15–19, 1997. 

32. R. kümmerle, G. grisetti, H. strasdat, K. konolige, and W. burgard, “g2o: A gener frame- 

work for graph optimization,” in proc. ieee intern confer on robot and au- 

tomat (icra), 2011, pp. 3607–3613. 

33. T. davis, direct method for spars linear systems, 2006. 

34. I. karamouzas, B. skinner, and S. J. guy, “univers power law govern pedestrian inter- 

actions,” physic review letters, vol. 113, no. 23, p. 238701, 2014. 

35. E. marder-eppstein, “move base: A ro packag that let you move a robot to desir 

posit use the navig stack.” 

36. D. V. lu, D. hershberger, and W. D. smart, “layer costmap for context-sensit naviga- 

tion,” in proc. ieee/rsj intern confer on intellig robot and system (iros), 

septemb 14-18, 2014, pp. 709–715. 

37. P. fiorini and Z. shiller, “motion plan in dynam environ use veloc obsta- 

cles,” the intern journal of robot research, vol. 17, no. 7, pp. 760–772, 1998. 

38. H. khambhaita and R. alami, “assess the social criteria for human-robot collabor 

navigation: A comparison of human-awar navig planners,” in proc. ieee interna- 

tional symposium on robot and human interact commun (ro-man), 2017. 

39. H. khambhaita, J. rios-martinez, and R. alami, “head-bodi motion coordin for hu- 

man awar robot navigation,” in proc. intern workshop on human-friendlli robot 

(hfr), septemb 29-30, 2016. 


